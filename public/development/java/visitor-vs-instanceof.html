<!DOCTYPE html>
<html>
  <head>
    <title>
    Visitor vs. InstanceOf - wiki.ght1pc9kc.fr
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.2" />
<title>Visitor vs. InstanceOf :: wiki.ght1pc9kc.fr</title>
<link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "";
</script>
  </head>
  <body data-url="/development/java/visitor-vs-instanceof.html">

    <header>
  
  <div class="logo">
	<a class="baselink" href="">
	    <img src="/images/logo.png" alt="wiki.ght1pc9kc.fr"/> wiki.ght1pc9kc.fr
	</a>
</div>
<span class="spacer">&nbsp;</span>
<div class="navbar-right">
    <form class="navbar-form navbar-left" action="/search.html" method="get">
       <input id="search-box" name="query" placeholder="Search..." autocomplete="off" spellcheck="false" dir="auto" type="text">
    </form>
</div>
</header>
<article>
  <aside class="menu">
    <div class="list-group">
        <a href="/cuisine.html" class="list-group-item list-group-item-action active">Cuisine</a>
    </div>
    <div class="list-group">
        <a href="/misc.html" class="list-group-item list-group-item-action active">Divers</a>
    </div>
    <div class="list-group">
        <a href="/development.html" class="list-group-item list-group-item-action active">Développement</a>
        <a href="/development/dotnet.html" class="list-group-item list-group-item-action ">.Net</a>
        <a href="/development/gwt.html" class="list-group-item list-group-item-action ">GWT</a>
        <a href="/development/java.html" class="list-group-item list-group-item-action ">Java</a>
        <a href="/development/javascript.html" class="list-group-item list-group-item-action ">Javascript</a>
        <a href="/development/spring.html" class="list-group-item list-group-item-action ">Spring</a>
    </div>
    <div class="list-group">
        <a href="/linux.html" class="list-group-item list-group-item-action active">Linux</a>
        <a href="/linux/administration.html" class="list-group-item list-group-item-action ">Administration</a>
        <a href="/linux/divers.html" class="list-group-item list-group-item-action ">Divers</a>
        <a href="/linux/gnomeshell.html" class="list-group-item list-group-item-action ">GnomeShell</a>
        <a href="/linux/network.html" class="list-group-item list-group-item-action ">Réseau</a>
        <a href="/linux/shell.html" class="list-group-item list-group-item-action ">Shell</a>
    </div>
    <div class="list-group">
        <a href="/outils.html" class="list-group-item list-group-item-action active">Outils</a>
        <a href="/outils/ansible.html" class="list-group-item list-group-item-action ">Ansible</a>
        <a href="/outils/docker.html" class="list-group-item list-group-item-action ">Docker</a>
        <a href="/outils/eclipse.html" class="list-group-item list-group-item-action ">Eclipse</a>
        <a href="/outils/git.html" class="list-group-item list-group-item-action ">Git</a>
        <a href="/outils/intellij.html" class="list-group-item list-group-item-action ">IntelliJ</a>
        <a href="/outils/latex.html" class="list-group-item list-group-item-action ">LaTeX</a>
        <a href="/outils/vmware.html" class="list-group-item list-group-item-action ">VMWare</a>
    </div>
    <div class="list-group">
        <a href="/serveurs.html" class="list-group-item list-group-item-action active">Serveur</a>
        <a href="/serveurs/http.html" class="list-group-item list-group-item-action ">HTTP</a>
        <a href="/serveurs/jboss.html" class="list-group-item list-group-item-action ">JBoss</a>
        <a href="/serveurs/mysql.html" class="list-group-item list-group-item-action ">MySQL</a>
        <a href="/serveurs/neo4j.html" class="list-group-item list-group-item-action ">Neo4J</a>
        <a href="/serveurs/oracle.html" class="list-group-item list-group-item-action ">Oracle</a>
        <a href="/serveurs/teradata.html" class="list-group-item list-group-item-action ">TeraData</a>
    </div>


  </aside>
  <section class="page">

    <h1>Visitor vs. InstanceOf</h1>
    
    

    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PartialKPIResolution</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> String aggregation<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PartialKPIResolution</span><span style="color:#f92672">(</span>String aggregation<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">aggregation</span> <span style="color:#f92672">=</span> aggregation<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> PartialFlatKPIResolution <span style="color:#a6e22e">flat</span><span style="color:#f92672">(</span>String aggregation<span style="color:#f92672">,</span> ImmutableMap<span style="color:#f92672">&lt;</span>RealmAttribute<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> byRealm<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> PartialFlatKPIResolution<span style="color:#f92672">(</span>aggregation<span style="color:#f92672">,</span> byRealm<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> PartialSyntheticKPIResolution <span style="color:#a6e22e">synthetic</span><span style="color:#f92672">(</span>Formula syntheticFormula<span style="color:#f92672">,</span> ApplicationPhase applicationPhase<span style="color:#f92672">,</span>
            String aggregation<span style="color:#f92672">,</span> ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> columnAggregations<span style="color:#f92672">,</span>
            ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> columns<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> PartialSyntheticKPIResolution<span style="color:#f92672">(</span>syntheticFormula<span style="color:#f92672">,</span> applicationPhase<span style="color:#f92672">,</span> aggregation<span style="color:#f92672">,</span> columnAggregations<span style="color:#f92672">,</span>
                columns<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> R <span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span>Visitor<span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> visitor<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Visitor</span><span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        R <span style="color:#a6e22e">visitFlat</span><span style="color:#f92672">(</span>PartialFlatKPIResolution resolution<span style="color:#f92672">);</span>
        R <span style="color:#a6e22e">visitSynthetic</span><span style="color:#f92672">(</span>PartialSyntheticKPIResolution resolution<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PartialFlatKPIResolution</span> <span style="color:#66d9ef">extends</span> PartialKPIResolution <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> ImmutableMap<span style="color:#f92672">&lt;</span>RealmAttribute<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> byRealm<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PartialFlatKPIResolution</span><span style="color:#f92672">(</span>String aggregation<span style="color:#f92672">,</span> ImmutableMap<span style="color:#f92672">&lt;</span>RealmAttribute<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> byRealm<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>aggregation<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">byRealm</span> <span style="color:#f92672">=</span> byRealm<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> R <span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span>Visitor<span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> visitor<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> visitor<span style="color:#f92672">.</span><span style="color:#a6e22e">visitFlat</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PartialSyntheticKPIResolution</span> <span style="color:#66d9ef">extends</span> PartialKPIResolution <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> Formula syntheticFormula<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> ApplicationPhase applicationPhase<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> columnAggregations<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> columns<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PartialSyntheticKPIResolution</span><span style="color:#f92672">(</span>Formula syntheticFormula<span style="color:#f92672">,</span> ApplicationPhase applicationPhase<span style="color:#f92672">,</span>
            String aggregation<span style="color:#f92672">,</span> ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> columnAggregations<span style="color:#f92672">,</span>
            ImmutableMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;</span> columns<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>aggregation<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">syntheticFormula</span> <span style="color:#f92672">=</span> syntheticFormula<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">applicationPhase</span> <span style="color:#f92672">=</span> applicationPhase<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">columnAggregations</span> <span style="color:#f92672">=</span> columnAggregations<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">columns</span> <span style="color:#f92672">=</span> columns<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>


    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> R <span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span>Visitor<span style="color:#f92672">&lt;</span>R<span style="color:#f92672">&gt;</span> visitor<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> visitor<span style="color:#f92672">.</span><span style="color:#a6e22e">visitSynthetic</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>


<span style="color:#f92672">}</span></code></pre></div>
<p>A la place de faire</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>partialKPIResolution <span style="color:#66d9ef">instanceof</span> PartialFlatRealmKPIResolution<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  PartialFlatKPIResolution resolution <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>PartialFlatRealmKPIResolution<span style="color:#f92672">)</span>partialKPIResolution<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">return</span> resolution<span style="color:#f92672">.</span><span style="color:#a6e22e">byRealm</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>realmAttribute<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
  LOGGER<span style="color:#f92672">.</span><span style="color:#a6e22e">warn</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Currently unsupported operation: TODO&#34;</span><span style="color:#f92672">);</span>
  <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> UnsupportedOperationException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;synthetic in realm child!&#34;</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>on peut faire :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">PartialFlatRealmKPIResolution partialFlatRealmKPIResolution <span style="color:#f92672">=</span> partialKPIResolution
    <span style="color:#f92672">.</span><span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Visitor<span style="color:#f92672">&lt;</span>PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> PartialFlatRealmKPIResolution <span style="color:#a6e22e">visitFlat</span><span style="color:#f92672">(</span>PartialFlatKPIResolution resolution<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> resolution<span style="color:#f92672">.</span><span style="color:#a6e22e">byRealm</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>realmAttribute<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> PartialFlatRealmKPIResolution <span style="color:#a6e22e">visitSynthetic</span><span style="color:#f92672">(</span>
                PartialSyntheticKPIResolution resolution<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            LOGGER<span style="color:#f92672">.</span><span style="color:#a6e22e">warn</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Currently unsupported operation: TODO&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> UnsupportedOperationException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;synthetic in realm child!&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">});</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">PartialFlatRealmKPIResolution partialFlatRealmKPIResolution <span style="color:#f92672">=</span> partialKPIResolution
    <span style="color:#f92672">.</span><span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Visitor<span style="color:#f92672">&lt;</span>PartialFlatRealmKPIResolution<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> PartialFlatRealmKPIResolution <span style="color:#a6e22e">visitFlat</span><span style="color:#f92672">(</span>PartialFlatKPIResolution resolution<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> resolution<span style="color:#f92672">.</span><span style="color:#a6e22e">byRealm</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>realmAttribute<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> PartialFlatRealmKPIResolution <span style="color:#a6e22e">visitSynthetic</span><span style="color:#f92672">(</span>
                PartialSyntheticKPIResolution resolution<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            LOGGER<span style="color:#f92672">.</span><span style="color:#a6e22e">warn</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Currently unsupported operation: TODO&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> UnsupportedOperationException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;synthetic in realm child!&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">});</span></code></pre></div>


    
    
  </section>

  
      <aside class="toc">
        
      </aside>
  

</article>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/js/search.js"></script>


    
    

    
  </body>
</html>
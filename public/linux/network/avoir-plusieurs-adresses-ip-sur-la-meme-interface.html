<!DOCTYPE html>
<html>
  <head>
    <title>
    Avoir plusieurs adresses IP sur la meme interface - wiki.ght1pc9kc.fr
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.2" />
<title>Avoir plusieurs adresses IP sur la meme interface :: wiki.ght1pc9kc.fr</title>
<link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "";
</script>
  </head>
  <body data-url="/linux/network/avoir-plusieurs-adresses-ip-sur-la-meme-interface.html">

    <header>
  
  <div class="logo">
	<a class="baselink" href="">
	    <img src="/images/logo.png" alt="wiki.ght1pc9kc.fr"/> wiki.ght1pc9kc.fr
	</a>
</div>
<span class="spacer">&nbsp;</span>
<div class="navbar-right">
    <form class="navbar-form navbar-left" action="/search.html" method="get">
       <input id="search-box" name="query" placeholder="Search..." autocomplete="off" spellcheck="false" dir="auto" type="text">
    </form>
</div>
</header>
<article>
  <aside class="menu">
    <div class="list-group">
        <a href="/cuisine.html" class="list-group-item list-group-item-action active">Cuisine</a>
    </div>
    <div class="list-group">
        <a href="/misc.html" class="list-group-item list-group-item-action active">Divers</a>
    </div>
    <div class="list-group">
        <a href="/development.html" class="list-group-item list-group-item-action active">Développement</a>
        <a href="/development/dotnet.html" class="list-group-item list-group-item-action ">.Net</a>
        <a href="/development/gwt.html" class="list-group-item list-group-item-action ">GWT</a>
        <a href="/development/java.html" class="list-group-item list-group-item-action ">Java</a>
        <a href="/development/javascript.html" class="list-group-item list-group-item-action ">Javascript</a>
        <a href="/development/spring.html" class="list-group-item list-group-item-action ">Spring</a>
    </div>
    <div class="list-group">
        <a href="/linux.html" class="list-group-item list-group-item-action active">Linux</a>
        <a href="/linux/administration.html" class="list-group-item list-group-item-action ">Administration</a>
        <a href="/linux/divers.html" class="list-group-item list-group-item-action ">Divers</a>
        <a href="/linux/gnomeshell.html" class="list-group-item list-group-item-action ">GnomeShell</a>
        <a href="/linux/network.html" class="list-group-item list-group-item-action ">Réseau</a>
        <a href="/linux/shell.html" class="list-group-item list-group-item-action ">Shell</a>
    </div>
    <div class="list-group">
        <a href="/outils.html" class="list-group-item list-group-item-action active">Outils</a>
        <a href="/outils/ansible.html" class="list-group-item list-group-item-action ">Ansible</a>
        <a href="/outils/docker.html" class="list-group-item list-group-item-action ">Docker</a>
        <a href="/outils/eclipse.html" class="list-group-item list-group-item-action ">Eclipse</a>
        <a href="/outils/git.html" class="list-group-item list-group-item-action ">Git</a>
        <a href="/outils/intellij.html" class="list-group-item list-group-item-action ">IntelliJ</a>
        <a href="/outils/latex.html" class="list-group-item list-group-item-action ">LaTeX</a>
        <a href="/outils/vmware.html" class="list-group-item list-group-item-action ">VMWare</a>
    </div>
    <div class="list-group">
        <a href="/serveurs.html" class="list-group-item list-group-item-action active">Serveur</a>
        <a href="/serveurs/http.html" class="list-group-item list-group-item-action ">HTTP</a>
        <a href="/serveurs/jboss.html" class="list-group-item list-group-item-action ">JBoss</a>
        <a href="/serveurs/mysql.html" class="list-group-item list-group-item-action ">MySQL</a>
        <a href="/serveurs/neo4j.html" class="list-group-item list-group-item-action ">Neo4J</a>
        <a href="/serveurs/oracle.html" class="list-group-item list-group-item-action ">Oracle</a>
        <a href="/serveurs/teradata.html" class="list-group-item list-group-item-action ">TeraData</a>
    </div>


  </aside>
  <section class="page">

    <h1>Avoir plusieurs adresses IP sur la meme interface</h1>
    
    

    

<p>Avec Linux (je sais pas pour Windows) il est possible de configurer plusieurs adresse IP
pour une même carte réseau.</p>

<h2 id="utilité">Utilité</h2>

<p>A quoi ça sert ? Le cas qui m&rsquo;intéressait au moment de trouver ça c&rsquo;est le cas d&rsquo;un serveur Apache
 publiant plusieurs serveurs virtuels en SSL. Dans ce cas Apache n&rsquo;est pas capable pour des raisons technique de fournir cette fonctionnalité a partir d&rsquo;un seul couple IP:PORT. Mais si notre serveur apache dispose de plusieurs IP il devient capable de faire ça.</p>

<h2 id="configuration">Configuration</h2>

<p>Il faut éditer le fichier <code>/etc/network/interfaces</code> comme suit :</p>

<pre><code># This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
allow-hotplug eth0
#iface eth0 inet dhcp

iface eth0 inet static
    address 172.16.139.20
    netmask 255.255.255.0
    gateway 172.16.139.254
    up   ip addr add 172.16.139.21/24 dev eth0 label eth0:0
    down ip addr del 172.16.139.21/24 dev eth0 label eth0:0
    up   ip addr add 172.16.139.22/24 dev eth0 label eth0:1
    down ip addr del 172.16.139.22/24 dev eth0 label eth0:1
</code></pre>

<p>Ici on se sert de l&rsquo;outil &ldquo;ip&rdquo; (futur remplaçant du vieillissant &ldquo;ifconfig&rdquo;) pour ajouter
des adresses à des label d&rsquo;eth0 (l&rsquo;interface par défaut).</p>

<p><em><strong>Remarque :</strong> Pour les VMs le gateway par défaut est x.x.x.2</em></p>

<p>Une fois le réseau redémarré, on obtiendra donc l&rsquo;affichage suivant :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ubuntu:~# ip addr show
<span style="color:#ae81ff">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">16436</span> qdisc noqueue state UNKNOWN
    link/loopback <span style="color:#ae81ff">00</span>:00:00:00:00:00 brd <span style="color:#ae81ff">00</span>:00:00:00:00:00
    inet <span style="color:#ae81ff">127</span>.0.0.1/8 scope host lo
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
<span style="color:#ae81ff">2</span>: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">1500</span> qdisc pfifo_fast state UP qlen <span style="color:#ae81ff">1000</span>
    link/ether <span style="color:#ae81ff">00</span>:0c:29:3c:85:09 brd ff:ff:ff:ff:ff:ff
    inet <span style="color:#ae81ff">172</span>.16.139.20/24 brd <span style="color:#ae81ff">172</span>.16.139.255 scope global eth0
    inet <span style="color:#ae81ff">172</span>.16.139.21/24 scope global secondary eth0:0
    inet <span style="color:#ae81ff">172</span>.16.139.22/24 scope global secondary eth0:1
    inet6 fe80::20c:29ff:fe3c:8509/64 scope link
       valid_lft forever preferred_lft forever</code></pre></div>
<h2 id="liens">Liens</h2>

<ul>
<li><a href="http://www.cyberciti.biz/faq/bind-alias-range-of-ip-address-in-linux/">http://www.cyberciti.biz/faq/bind-alias-range-of-ip-address-in-linux/</a></li>
<li><a href="http://wiki.debian.org/NetworkConfiguration#Multiple_IP_addresses_on_One_Interface">http://wiki.debian.org/NetworkConfiguration#Multiple_IP_addresses_on_One_Interface</a></li>
</ul>



    
    
  </section>

  
      <aside class="toc">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#utilité">Utilité</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#liens">Liens</a></li>
</ul></li>
</ul>
</nav>
      </aside>
  

</article>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/js/search.js"></script>


    
    

    
  </body>
</html>
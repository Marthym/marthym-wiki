<!DOCTYPE html>
<html>
  <head>
    <title>
    Démarrage/Arrêt automatique d’Oracle sous Linux - wiki.ght1pc9kc.fr
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.2" />
<title>Démarrage/Arrêt automatique d’Oracle sous Linux :: wiki.ght1pc9kc.fr</title>
<link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "";
</script>
  </head>
  <body data-url="/serveurs/oracle/demarrage-arret-automatique-doracle-sous-linux.html">

    <header>
  
  <div class="logo">
	<a class="baselink" href="">
	    <img src="/images/logo.png" alt="wiki.ght1pc9kc.fr"/> wiki.ght1pc9kc.fr
	</a>
</div>
<span class="spacer">&nbsp;</span>
<div class="navbar-right">
    <form class="navbar-form navbar-left" action="/search.html" method="get">
       <input id="search-box" name="query" placeholder="Search..." autocomplete="off" spellcheck="false" dir="auto" type="text">
    </form>
</div>
</header>
<article>
  <aside class="menu">
    <div class="list-group">
        <a href="/cuisine.html" class="list-group-item list-group-item-action active">Cuisine</a>
    </div>
    <div class="list-group">
        <a href="/misc.html" class="list-group-item list-group-item-action active">Divers</a>
    </div>
    <div class="list-group">
        <a href="/development.html" class="list-group-item list-group-item-action active">Développement</a>
        <a href="/development/dotnet.html" class="list-group-item list-group-item-action ">.Net</a>
        <a href="/development/gwt.html" class="list-group-item list-group-item-action ">GWT</a>
        <a href="/development/java.html" class="list-group-item list-group-item-action ">Java</a>
        <a href="/development/javascript.html" class="list-group-item list-group-item-action ">Javascript</a>
        <a href="/development/spring.html" class="list-group-item list-group-item-action ">Spring</a>
    </div>
    <div class="list-group">
        <a href="/linux.html" class="list-group-item list-group-item-action active">Linux</a>
        <a href="/linux/administration.html" class="list-group-item list-group-item-action ">Administration</a>
        <a href="/linux/divers.html" class="list-group-item list-group-item-action ">Divers</a>
        <a href="/linux/gnomeshell.html" class="list-group-item list-group-item-action ">GnomeShell</a>
        <a href="/linux/network.html" class="list-group-item list-group-item-action ">Réseau</a>
        <a href="/linux/shell.html" class="list-group-item list-group-item-action ">Shell</a>
    </div>
    <div class="list-group">
        <a href="/outils.html" class="list-group-item list-group-item-action active">Outils</a>
        <a href="/outils/ansible.html" class="list-group-item list-group-item-action ">Ansible</a>
        <a href="/outils/docker.html" class="list-group-item list-group-item-action ">Docker</a>
        <a href="/outils/eclipse.html" class="list-group-item list-group-item-action ">Eclipse</a>
        <a href="/outils/git.html" class="list-group-item list-group-item-action ">Git</a>
        <a href="/outils/intellij.html" class="list-group-item list-group-item-action ">IntelliJ</a>
        <a href="/outils/latex.html" class="list-group-item list-group-item-action ">LaTeX</a>
        <a href="/outils/vmware.html" class="list-group-item list-group-item-action ">VMWare</a>
    </div>
    <div class="list-group">
        <a href="/serveurs.html" class="list-group-item list-group-item-action active">Serveur</a>
        <a href="/serveurs/http.html" class="list-group-item list-group-item-action ">HTTP</a>
        <a href="/serveurs/jboss.html" class="list-group-item list-group-item-action ">JBoss</a>
        <a href="/serveurs/mysql.html" class="list-group-item list-group-item-action ">MySQL</a>
        <a href="/serveurs/neo4j.html" class="list-group-item list-group-item-action ">Neo4J</a>
        <a href="/serveurs/oracle.html" class="list-group-item list-group-item-action ">Oracle</a>
        <a href="/serveurs/teradata.html" class="list-group-item list-group-item-action ">TeraData</a>
    </div>


  </aside>
  <section class="page">

    <h1>Démarrage/Arrêt automatique d’Oracle sous Linux</h1>
    
    

    

<p>Modifier le fichier /etc/oratab (ou /var/opt/oracle selon install)
Ajouter <code>&lt;SID&gt;:&lt;ORACLE_HOME&gt;:Y</code> le &ldquo;Y&rdquo; indiquant si la base doit être ou non démarré par &ldquo;dbstart&rdquo; et &ldquo;dbshut&rdquo;.</p>

<p>Créer le script &ldquo;/etc/init.d/dboracle&rdquo; contenant :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>  <span style="color:#75715e">#
</span><span style="color:#75715e"></span>  <span style="color:#75715e"># chkconfig: 35 99 10
</span><span style="color:#75715e"></span>  <span style="color:#75715e"># description: Starts and stops Oracle processes
</span><span style="color:#75715e"></span>  <span style="color:#75715e">#
</span><span style="color:#75715e"></span> <span style="color:#75715e"># Set ORA_HOME to be equivalent to the $ORACLE_HOME
</span><span style="color:#75715e"></span>  <span style="color:#75715e"># from which you wish to execute dbstart and dbshut;
</span><span style="color:#75715e"></span>  <span style="color:#75715e">#
</span><span style="color:#75715e"></span>  <span style="color:#75715e"># Set
</span><span style="color:#75715e"></span>ORA_OWNER to the user id of the owner of the
  <span style="color:#75715e"># Oracle database in ORA_HOME.
</span><span style="color:#75715e"></span>  <span style="color:#75715e">#
</span><span style="color:#75715e"></span>  ORA_HOME<span style="color:#f92672">=</span>&lt;Type your ORACLE_HOME
in full path here&gt;
  ORA_OWNER<span style="color:#f92672">=</span>&lt;Type your Oracle account name here&gt;
  <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> in
     <span style="color:#e6db74">&#39;start&#39;</span><span style="color:#f92672">)</span>
       <span style="color:#75715e"># Start the TNS Listener
</span><span style="color:#75715e"></span>        su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/lsnrctl start&#34;</span>
        <span style="color:#75715e"># Start the Oracle
</span><span style="color:#75715e"></span>databases:
        <span style="color:#75715e"># The following command assumes that the oracle login
</span><span style="color:#75715e"></span>        <span style="color:#75715e"># will not prompt the user for any values
</span><span style="color:#75715e"></span>       su - $ORA_OWNER -c $ORA_HOME/bin/dbstart
        <span style="color:#75715e"># Start the Intelligent Agent
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f $ORA_HOME/bin/emctl <span style="color:#f92672">]</span>;
<span style="color:#66d9ef">then</span>
            su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/emctl start agent&#34;</span>
        <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> -f $ORA_HOME/bin/agentctl <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
           su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/agentctl start&#34;</span>
        <span style="color:#66d9ef">else</span>
            su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/lsnrctl
</span><span style="color:#e6db74">dbsnmp_start&#34;</span>
        <span style="color:#66d9ef">fi</span>
        <span style="color:#75715e"># Start Management Server
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f $ORA_HOME/bin/emctl <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
            su
- $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/emctl start dbconsole&#34;</span>
        <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> -f $ORA_HOME/bin/oemctl <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
            su
- $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/oemctl start oms&#34;</span>
        <span style="color:#66d9ef">fi</span>
        <span style="color:#75715e"># Start HTTP Server
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f $ORA_HOME/Apache/Apache/bin/apachectl
<span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
            su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/Apache/Apache/bin/apachectl start&#34;</span>
        <span style="color:#66d9ef">fi</span>
        touch /var/lock/subsys/dbora
       ;;
     <span style="color:#e6db74">&#39;stop&#39;</span><span style="color:#f92672">)</span>
        <span style="color:#75715e"># Stop HTTP Server
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f $ORA_HOME/Apache/Apache/bin/apachectl <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
  su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/Apache/Apache/bin/apachectl stop&#34;</span>
        <span style="color:#66d9ef">fi</span>
        <span style="color:#75715e"># Stop the TNS Listener
</span><span style="color:#75715e"></span>      su - $ORA_OWNER -c <span style="color:#e6db74">&#34;</span>$ORA_HOME<span style="color:#e6db74">/bin/lsnrctl stop&#34;</span>
        <span style="color:#75715e"># Stop the Oracle databases:
</span><span style="color:#75715e"></span>        <span style="color:#75715e"># The following
</span><span style="color:#75715e"></span>command assumes that the oracle login
        <span style="color:#75715e"># will not prompt the user for any values
</span><span style="color:#75715e"></span>        su - $ORA_OWNER -c $ORA_HOME/bin/dbshut
       rm -f /var/lock/subsys/dbora
        ;;
  <span style="color:#66d9ef">esac</span>
  # End of script dbora</code></pre></div>
<p>Modifier les permissions du script :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">chmod <span style="color:#ae81ff">755</span> /etc/init.d/dbora</code></pre></div>
<p>Enregistrer le service :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">/sbin/chkconfig --add dbora</code></pre></div>
<p><em>Cette action enregistre le services dans les mécanisme de démarrage de Linux. Sur SuSE SLES7 et Red Hat Advanced Server
2.1 ça crée des lien symbolique dans le répertoire rc<code>&lt;runlevel&gt;</code>.d vers /etc/init.d/dbora script.</em></p>

<h2 id="liens">Liens</h2>

<ul>
<li><a href="http://www.togaware.com/linux/survivor/Starting_Stopping.html">http://www.togaware.com/linux/survivor/Starting_Stopping.html</a>
<br /></li>
</ul>



    
    
  </section>

  
      <aside class="toc">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#liens">Liens</a></li>
</ul></li>
</ul>
</nav>
      </aside>
  

</article>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/js/search.js"></script>


    
    

    
  </body>
</html>
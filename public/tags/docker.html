<!DOCTYPE html>
<html>
  <head>
    <title>wiki.ght1pc9kc.fr</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.2" />
<title>Docker :: wiki.ght1pc9kc.fr</title>
<link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "";
</script>
  </head>
  <body data-url="/tags/docker.html">

    <header>
  
  <div class="logo">
	<a class="baselink" href="">
	    <img src="/images/logo.png" alt="wiki.ght1pc9kc.fr"/> wiki.ght1pc9kc.fr
	</a>
</div>
<span class="spacer">&nbsp;</span>
<div class="navbar-right">
    <form class="navbar-form navbar-left" action="/search.html" method="get">
       <input id="search-box" name="query" placeholder="Search..." autocomplete="off" spellcheck="false" dir="auto" type="text">
    </form>
</div>
</header>
<article>
  <aside class="menu">
    <div class="list-group">
        <a href="/cuisine.html" class="list-group-item list-group-item-action active">Cuisine</a>
    </div>
    <div class="list-group">
        <a href="/misc.html" class="list-group-item list-group-item-action active">Divers</a>
    </div>
    <div class="list-group">
        <a href="/development.html" class="list-group-item list-group-item-action active">Développement</a>
        <a href="/development/dotnet.html" class="list-group-item list-group-item-action ">.Net</a>
        <a href="/development/gwt.html" class="list-group-item list-group-item-action ">GWT</a>
        <a href="/development/java.html" class="list-group-item list-group-item-action ">Java</a>
        <a href="/development/javascript.html" class="list-group-item list-group-item-action ">Javascript</a>
        <a href="/development/spring.html" class="list-group-item list-group-item-action ">Spring</a>
    </div>
    <div class="list-group">
        <a href="/linux.html" class="list-group-item list-group-item-action active">Linux</a>
        <a href="/linux/administration.html" class="list-group-item list-group-item-action ">Administration</a>
        <a href="/linux/divers.html" class="list-group-item list-group-item-action ">Divers</a>
        <a href="/linux/gnomeshell.html" class="list-group-item list-group-item-action ">GnomeShell</a>
        <a href="/linux/network.html" class="list-group-item list-group-item-action ">Réseau</a>
        <a href="/linux/shell.html" class="list-group-item list-group-item-action ">Shell</a>
    </div>
    <div class="list-group">
        <a href="/outils.html" class="list-group-item list-group-item-action active">Outils</a>
        <a href="/outils/ansible.html" class="list-group-item list-group-item-action ">Ansible</a>
        <a href="/outils/docker.html" class="list-group-item list-group-item-action ">Docker</a>
        <a href="/outils/eclipse.html" class="list-group-item list-group-item-action ">Eclipse</a>
        <a href="/outils/git.html" class="list-group-item list-group-item-action ">Git</a>
        <a href="/outils/intellij.html" class="list-group-item list-group-item-action ">IntelliJ</a>
        <a href="/outils/latex.html" class="list-group-item list-group-item-action ">LaTeX</a>
        <a href="/outils/vmware.html" class="list-group-item list-group-item-action ">VMWare</a>
    </div>
    <div class="list-group">
        <a href="/serveurs.html" class="list-group-item list-group-item-action active">Serveur</a>
        <a href="/serveurs/http.html" class="list-group-item list-group-item-action ">HTTP</a>
        <a href="/serveurs/jboss.html" class="list-group-item list-group-item-action ">JBoss</a>
        <a href="/serveurs/mysql.html" class="list-group-item list-group-item-action ">MySQL</a>
        <a href="/serveurs/neo4j.html" class="list-group-item list-group-item-action ">Neo4J</a>
        <a href="/serveurs/oracle.html" class="list-group-item list-group-item-action ">Oracle</a>
        <a href="/serveurs/teradata.html" class="list-group-item list-group-item-action ">TeraData</a>
    </div>


  </aside>
  <section class="page">

    <h1>Docker</h1>
    
    



<div class="extra-pagination inner">
<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 2</span>
	
	    <a class="older-posts" href="/tags/docker/page/2.html">Next Pages &rarr;</a>
	
</nav>

</div>


   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/acces-docker-non-root.html">Accès Docker non root</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Normalement tous les accès docker se font en root avec sudo ou autre. Pour utiliser docker en non-root :
sudo usermod -a -G docker netflow <a class="read-more" href="/outils/docker/acces-docker-non-root.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/linux/">linux</a>
            
        

    </footer>
</article>

   <article class="post linux">
    <header class="post-header">
        <h2 class="post-title"><a href="/linux/divers/allow-xhost-to-docker.html">Autoriser XHost à Docker</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Pour une raison que j&rsquo;ignore, une mise à jour récente de Debian bloque l&rsquo;accès Xhost au container Docker locaux. Pour authoriser à nouveau il faut un xhost +. Pour éviter le mode open bar, on utilise la commande suivante :
xhost +local:docker Pour l&rsquo;activer au boot de la machine j&rsquo;ai modifié /etc/rc.local et rajouter :
... # By default this script does nothing.  /usr/bin/xhost +local:docker exit 0 . <a class="read-more" href="/linux/divers/allow-xhost-to-docker.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/linux/">linux</a>
            
                <a class="label label-default" href="tags/misc/">misc</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/x11/">x11</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/autoriser-lacces-au-display-pour-un-container-specifique.html">Autoriser l’acces au DISPLAY pour un container specifique</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Avec les nouvelles version du noyau, le DISPLAY est plus verrouillé qu’avant et des problèmes de DISPLAY interviennent lorsque l’on veut accéder à une appli graphique à l’intérieur d’un docker. Pour résoudre ce problème il faut autoriser le DISPLAY pour le container, pour cela :
{% raw %}xhost +local:`docker inspect --format=&#39;{{ .Config.Hostname }}&#39; $containerId`{% endraw %} L’idéal serait de la mettre ensuite dans le démarrage du système &hellip; <a class="read-more" href="/outils/docker/autoriser-lacces-au-display-pour-un-container-specifique.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/network/">network</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/changer-le-repertoire-des-images-docker.html">Changer le répertoire des images docker</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Comme j&rsquo;ai deux disques durs et que je voudrais pas charger le SSD pour rien, je voulais changer le répertoire des images.
Pour ça, dans le fichier /etc/default/docker.io il faut rajouter l&rsquo;option -g dans les options :
# Use DOCKER_OPTS to modify the daemon startup options. #DOCKER_OPTS=&quot;--dns 8.8.8.8 --dns 8.8.4.4&quot; DOCKER_OPTS=&quot;-g /home/docker&quot;  pensez à créer le nouveau répertoire, voire à y copier le contenu de l&rsquo;ancien répertoire /var/lib/docker <a class="read-more" href="/outils/docker/changer-le-repertoire-des-images-docker.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/docker--failed-to-create-image-rootfs.html">Docker failed to create image rootfs</a></h2>
    </header>
    <section class="post-excerpt">
        <p>En voulant puller une image docker depuis le registry j&rsquo;ai cette erreur quand je suis en device-mapper :
82f4a6e0947d: Error pulling image (jre7u67) from my-docker-hub/java, Driver devicemapper failed to create image rootfs 511136ea3c5a64f264b78b5433614aec563103b4d4702f3ba7d4d2698e22c158: Can't set task name / dev/mapper/docker-8:2-5637992-pool name /dev/mapper/docker-8:2-5637992-pool 2014/11/25 15:05:47 Error pulling image (jre7u67) from my-docker-hub/java, Driver devicemapper failed to create image rootfs 511136ea3c5a64f264b78b5433614aec563103b4d4702f3ba7d4d2698e22c158: Can't set task name /dev/mapper/docker-8:2-5637992-pool  Pour corriger :
sudo service docker stop sudo rm -Rf /var/lib/docker sudo service docker start <a class="read-more" href="/outils/docker/docker--failed-to-create-image-rootfs.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/export-importer-une-image-docker.html">Export Importer une image Docker</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Pour exporter :
docker save mynewimage &gt; /tmp/mynewimage.tar bzip2 /tmp/mynewimage.tar Pour ré-importer:
bzip2 -d /tmp/mynewimage.tar.bz2 docker load &lt; /tmp/mynewimage. <a class="read-more" href="/outils/docker/export-importer-une-image-docker.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/inetaddress-doesnt-resolve-ip-on-alpine-docker-container.html">InetAddress does’nt resolve ip on alpine docker container</a></h2>
    </header>
    <section class="post-excerpt">
        <p>C&rsquo;est un problème qu&rsquo;on a rencontré quand on a voulu réduire la taille des docker en utilisant l&rsquo;image Alpine comme image de base.
Symptome Exception in thread &quot;main&quot; java.net.UnknownHostException: mysql: unknown error at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928) at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323) at java.net.InetAddress.getAllByName0(InetAddress.java:1276) at java.net.InetAddress.getAllByName(InetAddress.java:1192) at java.net.InetAddress.getAllByName(InetAddress.java:1126) at java.net.InetAddress.getByName(InetAddress.java:1076) at SomaDBTest.main(SomaDBTest.java:52)  Solution En gros l&rsquo;image Alpine veut par défaut résoudre les noms de machine pas DNS en priorité au lieu d&rsquo;utiliser d&rsquo;abord les fichiers (hosts). <a class="read-more" href="/outils/docker/inetaddress-doesnt-resolve-ip-on-alpine-docker-container.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/error/">error</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/registry-docker-derriere-un-nginx.html">Registry Docker derrière un Nginx</a></h2>
    </header>
    <section class="post-excerpt">
        <p>L&rsquo;idée est de placer un registry Docker derrière un frontal Nginx afin de faire du HTTPS voire de l&rsquo;authentification.
Le premier truc c&rsquo;est la conf Nginx :
server { listen 80; listen 443 ssl; server_name docker.livingobjects.com; access_log off; server_tokens off; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; # On commence par dire où se situent nos certificats SSL # On aurait pu les mettre séparément dans chaque &#34;server&#34; en ayant besoin. ssl_certificate /etc/nginx/ssl/docker. <a class="read-more" href="/outils/docker/registry-docker-derriere-un-nginx.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/remove-ophans-from-docker-registry.html">Remove ophans from docker registry</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Il est compliqué de nettoyer un registry Docker (avant sa version 2.0 en tout cas). Voici un script qui supprime les images orpheline dans le registry.
#!/bin/bash  JQPATH=$(which jq) if [ &#34;x$JQPATH&#34; == &#34;x&#34; ]; then echo &#34;Couldn&#39;t find jq executable.&#34; 1&gt;&amp;2 exit 2 fi set -eu shopt -s nullglob readonly base_dir=/data/docker_registry_backup/registry/ readonly output_dir=$(mktemp -d -t trace-images-XXXX) readonly jq=$JQPATH readonly repository_dir=$base_dir/repositories readonly image_dir=$base_dir/images readonly all_images=$output_dir/all readonly used_images=$output_dir/used readonly unused_images=$output_dir/unused function info() { echo -e &#34;\nArtifacts available in $output_dir&#34; } trap info EXIT ERR INT function image_history() { local readonly image_hash=$1 $jq &#39;. <a class="read-more" href="/outils/docker/remove-ophans-from-docker-registry.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/cleanup/">cleanup</a>
            
                <a class="label label-default" href="tags/registry/">registry</a>
            
        

    </footer>
</article>

   <article class="post outils">
    <header class="post-header">
        <h2 class="post-title"><a href="/outils/docker/supprimer-les-images-non-tagge.html">Supprimer les images non taggé</a></h2>
    </header>
    <section class="post-excerpt">
        <p>Pour virer toutes les images non taggé :
docker rmi $(docker images | grep &#39;^&lt;none&gt;&#39; | awk &#39;{print $3}&#39;) Attention si l&rsquo;image est utilisé par un conteneur ça marchera pas.
A partir de la 1.3.1 :
docker rmi $(docker images -f &#34;dangling=true&#34; -q) <a class="read-more" href="/outils/docker/supprimer-les-images-non-tagge.html">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="tags/development/">development</a>
            
                <a class="label label-default" href="tags/docker/">docker</a>
            
                <a class="label label-default" href="tags/cleanup/">cleanup</a>
            
        

    </footer>
</article>


<div style="margin-bottom:2rem"></div>

<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 2</span>
	
	    <a class="older-posts" href="/tags/docker/page/2.html">Next Pages &rarr;</a>
	
</nav>




    
    
  </section>

  
      <aside class="toc">
        
      </aside>
  

</article>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/js/search.js"></script>


    
    

    
  </body>
</html>